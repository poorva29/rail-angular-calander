@model MiraiConsultMVC.Models.ModelUser
@{
    ViewBag.Title = "DoctorSignUp";
    Layout = "~/Views/Shared/_AskmiraiMasterLayout.cshtml";
}
<link href="~/Content/chosen/chosen.css" rel="stylesheet" />

<script type="text/javascript" src="../Scripts/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../Scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="../Scripts/google-code-prettify/prettify.js"></script>
<script type="text/javascript" src="../Scripts/jquery-ui.min.js"></script>
<script type="text/javascript" src="../Scripts/utility.js"></script>
<script src="../Scripts/bootstrap-datepicker.js"></script>
<script src="../Scripts/dateofbirthvalidation.js"></script>
<script src="../Content/chosen/chosen.jquery.js"></script>
@Scripts.Render("~/bundles/jqueryval")
@*<a href="~/Content/less/datepicker.less"></a>*@
@using (Html.BeginForm(Html.BeginForm("DoctorSignUp", "User", FormMethod.Post, new { @encType = "multipart/form-data", autocomplete = "off" })))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    {
        <div class="main row-fluid">
            <div class="span12 main-outter-padding">
                <div class="row-fluid">
                    <div class="row-fluid">
                        <div class="span12 cust-header-name-text">
                            <h5 class="title cust-header-main-text-title">Sign Up For Doctor Account</h5>
                        </div>
                    </div>

                    @if (ViewBag.message != null && ViewBag.message == "Your registration request has been submitted successfully. You will receive verification email shortly. Please check spam/junk incase you don't find an email in your inbox.")
                    {
                        <div class="wrapper-bordered alert alert-success" id="SuccessMessagediv">
                            <div class="row-fluid">
                                <div class="span12">
                                    <label id="lblSuccessMessage" class="success_message_color msg_font">@ViewBag.message</label>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div id="controlcontainer" class="wrapper-bordered">
                            <div class="row-fluid">
                                @if (ViewBag.message != null && ViewBag.message == "This email is not available. Please select a different email.")
                                {
                                    <div class="span12 alert alert-error" id="errorMessageDiv">
                                        <label id="lblErrorMessage" class="error_message_color msg_font">@ViewBag.message</label>
                                    </div>
                                }
                                <div class="span12 cust-header-name-text">
                                    <h5 class="title cust-header-name-text cust-space-below">Personal Details</h5>
                                </div>

                                <div class="row-fluid cust-padding-bw-row">
                                    <div class="span12">
                                        <div class=" span6">
                                            <div class="span4 pull-left ">
                                                <label class="required cust-font-style">First Name:</label>
                                            </div>
                                            <div class="span8  ">
                                                @Html.TextBoxFor(m => m.FirstName, new { @class = "cust-no-border cust-lightgreen input-block-level contact_margin", maxlength = "50", placeholder = "First Name" })<br />
                                                @Html.ValidationMessageFor(m => m.FirstName, string.Empty, new { @class = "validation-summary-errors" })
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="required cust-font-style">Last Name:</label>
                                            </div>
                                            <div class="span8">
                                                @Html.TextBoxFor(m => m.LastName, new { @class = "cust-no-border cust-gray input-block-level contact_margin", maxlength = "50", placeholder = "Last Name" })<br />
                                                @Html.ValidationMessageFor(m => m.LastName, string.Empty, new { @class = "validation-summary-errors" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid cust-padding-bw-row">
                                    <div class="span12">
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style">Date of Birth:</label>
                                            </div>
                                            <div class="span8">
                                                <div class="input-append date" id="dob" data-date-format="dd/mm/yyyy" data-date-start-view="decade"
                                                     data-date-enddate="new Date()" style="width: 100%;">
                                                    @Html.TextBoxFor(m => m.DateOfBirth, new { @class = "input-without-right-curve cust-lightgreen cust-gray contact_margin", placeholder = "Date Of Birth", @Value = Model.DateOfBirth == null ? "" : Convert.ToDateTime(Model.DateOfBirth).ToString("dd/MM/yyyy"), @style = " width:85%", @id = "txtDob" })
                                                    <span class="add-on add-on-green  icon-with-right-curve"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style">Gender:</label>
                                            </div>
                                            <div class="span8">
                                                <label class="radio inline cust-font-style">
                                                    @Html.RadioButton("Gender", "0", true, new { @class = "cust-font-style" }) Male
                                                </label>
                                                <label class="radio inline gendermargin cust-font-style">
                                                    @Html.RadioButton("Gender", "1", false, new { @class = "cust-font-style" }) Female
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid cust-padding-bw-row">
                                    <div class="span12">
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style">Mobile No:</label>
                                            </div>
                                            <div class="span8">
                                                @Html.TextBoxFor(m => m.MobileNo, new { @class = "cust-no-border cust-gray input-block-level contact_margin", @maxlength = "10", @placeholder = "Mobile No", @onkeypress = "return isNumber(event,10,this);" })<br />
                                                @Html.ValidationMessageFor(m => m.MobileNo, string.Empty, new { @class = "validation-summary-errors" })
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style">Photo:</label>
                                            </div>
                                            <div class="span8">
                                                <input type="file" name="file" id="Image" value="@Model.Image" maxlength="256" style="width: 100%;" class="contact_margin"><br />
                                                <span id="ImageValidation" class="field-validation-error validation-summary-errors" data-valmsg-for="Image" data-valmsg-replace="true"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid cust-padding-bw-row">
                                    <div class="span12">
                                        <div class="span2">
                                            <label class="cust-font-style">About Me:</label>
                                        </div>
                                        <div class="span10 cust-margin-span10">
                                            @Html.TextAreaFor(m => m.AboutMe, new { @class = " cust-lightgreen input-block-level contact_margin", maxlength = "200", @placeholder = "About Me", @rows = "1", @cols = "5" })
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12 cust-header-name-text">
                                        <h5 class="title cust-header-name-text">Professional Details</h5>
                                    </div>
                                </div>
                                <div class="row-fluid cust-padding-bw-row">
                                    <div class="span12">
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style">Specialities:</label>
                                            </div>
                                            <div class="span8">
                                                @Html.ListBox(
                                                "lstSpecialities",
                                                ViewBag.specialities as MultiSelectList,
                                                new { @class = "chzn-select regspeciality_width contact_margin" }
                                                )
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style">Registration No:</label>
                                            </div>
                                            <div class="span8">
                                                @Html.TextBoxFor(m => m.RegistrationNumber, new { @class = "cust-no-border cust-lightgreen input-block-level contact_margin", maxlength = "15", placeholder = "Registration Number" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid cust-padding-bw-row">
                                    <div class="span12">
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style">Country:</label>
                                            </div>
                                            <div class="span8">
                                                @if (Model.Countries != null)
                                                {
                                                    ViewBag.countries = Model.Countries;
                                                    @Html.DropDownListFor(m => Model.CountryId, new SelectList(ViewBag.countries, "Value", "Text", Model.CountryId), "--Select Country--", new { @class = "cust-no-border cust-lightgreen input-block-level drop-arrows contact_margin", id = "ddlCountry", onchange = "getRegistrationCouncilbyCountry(this.value)" })
                                                }
                                                else
                                                {
                                                    @Html.DropDownListFor(m => Model.CountryId, new SelectList(string.Empty), "--Select Country--", new { @class = "cust-no-border cust-lightgreen input-block-level drop-arrows contact_margin" })
                                                }
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style">Registration Council:</label>
                                            </div>
                                            <div class="span8">
                                                @if (Model.Councils != null)
                                                {
                                                    ViewBag.councils = Model.Councils;
                                                    @Html.DropDownListFor(m => Model.Regcouncilid, new SelectList(ViewBag.councils, "Value", "Text", Model.Regcouncilid), "--Registration Council--", new { @class = "cust-no-border cust-gray input-block-level drop-arrows contact_margin", id = "ddlRegistrationCouncil" })
                                                }
                                                else
                                                { 
                                                    @Html.DropDownListFor(m => m.Regcouncilid, new SelectList(string.Empty), "--- Registration Council ---", new { @class = "cust-no-border cust-gray input-block-level drop-arrows", id = "ddlRegistrationCouncil" })
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span12 cust-header-name-text">
                                        <h5 class="title cust-header-name-text">Account Details</h5>
                                    </div>
                                </div>
                                <div class="row-fluid cust-padding-bw-row">
                                    <div class="span12">
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style required ">Email:</label>
                                            </div>
                                            <div class="span8">
                                                @Html.TextBoxFor(m => m.Email, new { @class = "cust-no-border cust-lightgreen input-block-level contact_margin", maxlength = "50", placeholder = "Email" })<br />
                                                @Html.ValidationMessageFor(m => m.Email, string.Empty, new { @class = "validation-summary-errors" })
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row-fluid cust-padding-bw-row">
                                    <div class="span12">
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style required ">Password:</label>
                                            </div>
                                            <div class="span8">
                                                @Html.PasswordFor(m => m.Password, new { @Class = "cust-no-border cust-gray input-block-level contact_margin", maxlength = "30", placeholder = "Password" })<br />
                                                @Html.ValidationMessageFor(m => m.Password, string.Empty, new { @class = "validation-summary-errors" })
                                            </div>
                                        </div>
                                        <div class="span6">
                                            <div class="span4">
                                                <label class="cust-font-style required ">Confirm Password:</label>
                                            </div>
                                            <div class="span8">
                   
                                                @Html.PasswordFor(m => m.ConfirmPassword, new { @maxlength = "30", @id = "ConfirmPassword", @type = "password", @class = "cust-no-border cust-lightgreen input-block-level contact_margin", @placeholder = "Confirm Password" })
                                                @Html.ValidationMessageFor(m => m.ConfirmPassword, string.Empty, new { @class = "validation-summary-errors" })

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid cust-padding-bw-row text-center">
                                    <div class="span12">
                                        <input type="submit" name="btnCreateDoctorAccount" value="Create Account" id="btnCreateDoctorAccount" onclick="" class="btn cust-button-radius cust-skyblue cust-uppercase cust-space-around cust-medium-button cust-font-style">
                                        <input type="reset" name="btnClear" value="Clear" id="btnClear" onclick="window.location.href = '/User/DoctorSignUp'" class="btn cust-button-radius cust-uppercase cust-red cust-space-around cust-medium-button cust-font-style">
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
        <input type="hidden" id="hdnCityId" name="hdnRegcouncilid" value="@Model.Regcouncilid" />

    }
}

<script type="text/javascript">
    function isNumber(evt, num, txt) {
        evt = (evt) ? evt : window.event;
        var len = $(txt).val().length;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if ((charCode > 31 && (charCode < 48 || charCode > 57)) || len >= num) {
            return false;
        }
        return true;
    }

    $("#btnCreateDoctorAccount").click(function () {
        var val = $("#ImageValidation").text();
        tryNumber = 0;
        if (val == "") {
            return true;
        }
        else {
            return false;
        }
    });
    $("#Image").change(function () {

        var val = $(this).val();
        switch (val.substring(val.lastIndexOf('.') + 1).toLowerCase()) {
            case 'gif': case 'jpg': case 'png': case 'jpeg':
                $("#ImageValidation").html("");
                break;
            default:
                $("#ImageValidation").html("Supports only .jpg,.png,.gif,.jpeg formats. Please upload a file with either of these extensions.");
                break;
        }
    });


    $("#txtDob").focusout(function () {
        var cntrl = $(this);
        if (cntrl.val().length > 0)
            isValidDateofBirth(cntrl);
    })
    $("select").addClass("form-control")
    $(".input-block-level").keyup(function () {
        //Page_ClientValidate();
    });
    $(function () {
        $('#dob').datepicker();
    });

    function getRegistrationCouncilbyCountry(countryId) {
        $.ajax({
            type: "GET",
            url: '/User/populateRegistrationCouncilbyCountry' + '?countryId=' + countryId,
            datatype: "JSON",
            contentType: "application/json; charset=utf-8",
            success: function (returndata) {
                $("#ddlRegistrationCouncil").empty();
                for (var i = 0; i < returndata.length; i++) {
                    $("#ddlRegistrationCouncil").append($('<option>').text(returndata[i].name).attr('value', returndata[i].regcouncilid));
                };
            }

        });
    }
    $(".chzn-select").chosen({ allow_single_deselect: true });
    function validatePhoto(sender, args) {
        var file = document.getElementById('<%=fileUploadForImage.ClientID%>');
        var fileName = file.value;
        var lastDot = fileName.lastIndexOf(".");
        if (fileName.length > 0) {
            var fileType = fileName.substring(lastDot, fileName.length);
            args.IsValid = (((fileType.toLowerCase() == ".jpg") || (fileType.toLowerCase() == ".png") || (fileType.toLowerCase() == ".gif") || (fileType.toLowerCase() == ".jpeg")));
        }
    }
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-48132984-2', 'askmirai.com');
    ga('send', 'pageview');

</script>
